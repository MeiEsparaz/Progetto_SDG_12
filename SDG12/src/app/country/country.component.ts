import { Component, OnInit } from '@angular/core';
import { Observable } from 'rxjs';
import{HttpClient} from "@angular/common/http"

@Component({
  selector: 'app-country',
  templateUrl: './country.component.html',
  styleUrls: ['./country.component.css']
})
export class CountryComponent implements OnInit {

   chartDataArray = new Array<ChartData>();

  constructor(public http: HttpClient) {
  http.get('https://3001-e215c16f-191c-4075-9345-06866d7e9cae.ws-eu03.gitpod.io/users').subscribe(this.getData);
  //this.getData(fakeData.data);
  }
  ngOnInit(): void {
  }
      getData = (data) => {
    console.log(data);
    //data = fakeData.data;
    for (var i in data) {
      let cd = new ChartData(data[i]['Country Name'], "LineChart", data[i], data[i]['Country Name'])
      this.chartDataArray.push(cd);
    }
 }
}
export class ChartData {
  public data = [];
  constructor(public title, public type, json_data, public columnNames) {
    for (var i in json_data) {
      const parsedX = parseInt(i);
      const parsedY = parseFloat(json_data[i])
      if (!isNaN(parsedX) && !isNaN(parsedY)) {
        this.data.push([parsedX, parsedY]);
      }
    }
    console.log(this.data);

  }
}

export class fakeData {
  static data = [
    {
      "1960": "696475",
      "1961": "706002",
      "1962": "715908",
      "1963": "726194",
      "1964": "736835",
      "1965": "747851",
      "1966": "759174",
      "1967": "770799",
      "1968": "782735",
      "1969": "795055",
      "1970": "807688",
      "1971": "820646",
      "1972": "833857",
      "1973": "847250",
      "1974": "860065",
      "1975": "871836",
      "1976": "883320",
      "1977": "894582",
      "1978": "905592",
      "1979": "916413",
      "1980": "927068",
      "1981": "937631",
      "1982": "947960",
      "1983": "957938",
      "1984": "967344",
      "1985": "981530",
      "1986": "1000372",
      "1987": "1019131",
      "1988": "1037966",
      "1989": "1057035",
      "1990": "1076463",
      "1991": "1096263",
      "1992": "1116445",
      "1993": "1137096",
      "1994": "1158337",
      "1995": "1180134",
      "1996": "1202578",
      "1997": "1224357",
      "1998": "1246599",
      "1999": "1269123",
      "2000": "1291777",
      "2001": "1314333",
      "2002": "1336834",
      "2003": "1360180",
      "2004": "1385476",
      "2005": "1413317",
      "2006": "1444089",
      "2007": "1477073",
      "2008": "1510485",
      "2009": "1542085",
      "2010": "1570340",
      "2011": "1594801",
      "2012": "1616049",
      "2013": "1635209",
      "2014": "1653914",
      "2015": "1673265",
      "2016": "1693490",
      "2017": "1714181",
      "2018": "1735045",
      "2019": "1755498",
      "2020": "",
      "_id": "600fe7067d83ee66006ce7e2",
      "Country Name": "Congo, Rep.",
      "Country Code": "COG",
      "Indicator Name": "Country",
      "Indicator Code": "SP.RUR.TOTL"
    },
    {
      "1960": "24491",
      "1961": "25821",
      "1962": "27751",
      "1963": "29915",
      "1964": "31861",
      "1965": "33384",
      "1966": "34382",
      "1967": "35190",
      "1968": "36891",
      "1969": "41027",
      "1970": "47372",
      "1971": "56049",
      "1972": "66857",
      "1973": "79714",
      "1974": "94425",
      "1975": "110757",
      "1976": "128203",
      "1977": "146289",
      "1978": "164520",
      "1979": "181598",
      "1980": "196663",
      "1981": "211832",
      "1982": "227533",
      "1983": "242658",
      "1984": "258458",
      "1985": "275910",
      "1986": "294714",
      "1987": "314651",
      "1988": "336168",
      "1989": "359011",
      "1990": "383038",
      "1991": "408623",
      "1992": "436034",
      "1993": "464748",
      "1994": "494050",
      "1995": "523616",
      "1996": "546090",
      "1997": "562642",
      "1998": "580141",
      "1999": "598842",
      "2000": "619416",
      "2001": "638911",
      "2002": "658637",
      "2003": "687747",
      "2004": "737591",
      "2005": "813859",
      "2006": "919686",
      "2007": "1047284",
      "2008": "1177776",
      "2009": "1287206",
      "2010": "1360560",
      "2011": "1393639",
      "2012": "1394185",
      "2013": "1373616",
      "2014": "1347573",
      "2015": "1327003",
      "2016": "1313814",
      "2017": "1304680",
      "2018": "1298061",
      "2019": "1290785",
      "2020": "",
      "_id": "600fe7067d83ee66006ce7be",
      "Country Name": "United Arab Emirates",
      "Country Code": "ARE",
      "Indicator Name": "Country",
      "Indicator Code": "SP.RUR.TOTL"
    },
    {
      "1960": "690173",
      "1961": "683837",
      "1962": "675039",
      "1963": "665612",
      "1964": "657593",
      "1965": "649491",
      "1966": "639888",
      "1967": "629663",
      "1968": "618582",
      "1969": "607025",
      "1970": "594492",
      "1971": "582711",
      "1972": "572373",
      "1973": "561805",
      "1974": "551360",
      "1975": "540999",
      "1976": "530184",
      "1977": "510589",
      "1978": "491485",
      "1979": "473116",
      "1980": "455398",
      "1981": "440204",
      "1982": "430030",
      "1983": "420141",
      "1984": "410476",
      "1985": "401233",
      "1986": "392205",
      "1987": "383459",
      "1988": "375867",
      "1989": "368490",
      "1990": "361118",
      "1991": "354059",
      "1992": "347362",
      "1993": "340654",
      "1994": "333815",
      "1995": "326709",
      "1996": "319832",
      "1997": "313175",
      "1998": "306498",
      "1999": "300145",
      "2000": "294313",
      "2001": "289464",
      "2002": "285082",
      "2003": "280571",
      "2004": "276160",
      "2005": "272130",
      "2006": "268551",
      "2007": "265111",
      "2008": "261859",
      "2009": "258792",
      "2010": "255937",
      "2011": "254101",
      "2012": "250572",
      "2013": "246734",
      "2014": "242900",
      "2015": "239464",
      "2016": "235807",
      "2017": "231939",
      "2018": "228427",
      "2019": "224973",
      "2020": "",
      "_id": "600fe7067d83ee66006ce7c7",
      "Country Name": "Africa",
      "Country Code": "AFR",
      "Indicator Name": "Country",
      "Indicator Code": "SP.RUR.TOTL"
    }
  ]
}
